# 営業日報システム テスト仕様書

## 1. 文書情報

| 項目       | 内容                          |
| ---------- | ----------------------------- |
| 文書名     | 営業日報システム テスト仕様書 |
| バージョン | 1.0                           |
| 作成日     | 2026-02-15                    |
| 最終更新日 | 2026-02-15                    |

---

## 2. テスト概要

### 2.1 目的

本テスト仕様書は、営業日報システムの品質を保証するために実施するテストの内容を定義する。

### 2.2 テスト範囲

| テスト種別     | 対象                   | 実施フェーズ |
| -------------- | ---------------------- | ------------ |
| 単体テスト     | 各コンポーネント・関数 | 開発中       |
| 結合テスト     | API・DB連携            | 開発後       |
| システムテスト | 全機能                 | 結合テスト後 |
| 受入テスト     | ユーザー要件           | リリース前   |

### 2.3 テスト環境

| 項目          | 内容                         |
| ------------- | ---------------------------- |
| テスト環境URL | https://test-api.example.com |
| データベース  | テスト用DB（本番データなし） |
| テストデータ  | シードデータを使用           |
| ブラウザ      | Chrome最新版                 |

### 2.4 テスト完了基準

- 全テストケースの実行完了
- クリティカル・メジャーバグ: 0件
- マイナーバグ: 5件以下
- テストカバレッジ: 80%以上

---

## 3. テストデータ

### 3.1 営業マスタ テストデータ

| ID  | 名前      | メール             | 役割    | 上長ID |
| --- | --------- | ------------------ | ------- | ------ |
| 1   | 田中 太郎 | tanaka@example.com | sales   | 10     |
| 2   | 佐藤 花子 | sato@example.com   | sales   | 10     |
| 10  | 鈴木 部長 | suzuki@example.com | manager | NULL   |
| 99  | 管理者    | admin@example.com  | admin   | NULL   |

### 3.2 顧客マスタ テストデータ

| ID  | 顧客名          | 業種   |
| --- | --------------- | ------ |
| 1   | 株式会社ABC     | 製造業 |
| 2   | DEF商事         | 卸売業 |
| 3   | GHIテクノロジー | IT     |

---

## 4. 認証機能テスト

### 4.1 ログイン

| No       | テストケース           | 前提条件                  | 操作手順                                                           | 期待結果                                                      | 優先度 |
| -------- | ---------------------- | ------------------------- | ------------------------------------------------------------------ | ------------------------------------------------------------- | ------ |
| AUTH-001 | 正常ログイン           | 有効なユーザーが存在      | 1. 正しいメール・パスワードを入力<br>2. ログインボタンを押下       | ログイン成功、トークン取得                                    | 高     |
| AUTH-002 | メールアドレス誤り     | -                         | 1. 存在しないメールアドレスを入力<br>2. ログインボタンを押下       | 401エラー「メールアドレスまたはパスワードが正しくありません」 | 高     |
| AUTH-003 | パスワード誤り         | 有効なユーザーが存在      | 1. 正しいメール、誤ったパスワードを入力<br>2. ログインボタンを押下 | 401エラー「メールアドレスまたはパスワードが正しくありません」 | 高     |
| AUTH-004 | メールアドレス未入力   | -                         | 1. メールアドレスを空欄のまま<br>2. ログインボタンを押下           | 422エラー「メールアドレスは必須です」                         | 中     |
| AUTH-005 | パスワード未入力       | -                         | 1. パスワードを空欄のまま<br>2. ログインボタンを押下               | 422エラー「パスワードは必須です」                             | 中     |
| AUTH-006 | 無効ユーザーのログイン | is_active=falseのユーザー | 1. 無効ユーザーでログイン                                          | 401エラー「アカウントが無効です」                             | 高     |

### 4.2 ログアウト

| No       | テストケース       | 前提条件     | 操作手順                           | 期待結果       | 優先度 |
| -------- | ------------------ | ------------ | ---------------------------------- | -------------- | ------ |
| AUTH-010 | 正常ログアウト     | ログイン済み | 1. ログアウトAPIを実行             | ログアウト成功 | 高     |
| AUTH-011 | 未認証でログアウト | 未ログイン   | 1. トークンなしでログアウトAPI実行 | 401エラー      | 中     |

### 4.3 トークン検証

| No       | テストケース     | 前提条件         | 操作手順                         | 期待結果                   | 優先度 |
| -------- | ---------------- | ---------------- | -------------------------------- | -------------------------- | ------ |
| AUTH-020 | 有効なトークン   | ログイン済み     | 1. 有効なトークンでAPI実行       | 正常にAPI実行可能          | 高     |
| AUTH-021 | 期限切れトークン | トークン期限切れ | 1. 期限切れトークンでAPI実行     | 401エラー「TOKEN_EXPIRED」 | 高     |
| AUTH-022 | 不正なトークン   | -                | 1. 改ざんされたトークンでAPI実行 | 401エラー                  | 高     |

---

## 5. 日報機能テスト

### 5.1 日報一覧取得

| No      | テストケース       | 前提条件                   | 操作手順                     | 期待結果                   | 優先度 |
| ------- | ------------------ | -------------------------- | ---------------------------- | -------------------------- | ------ |
| RPT-001 | 一覧取得（営業）   | 営業でログイン             | 1. 日報一覧APIを実行         | 自分の日報一覧が取得できる | 高     |
| RPT-002 | 一覧取得（上長）   | 上長でログイン             | 1. 日報一覧APIを実行         | 部下の日報一覧が取得できる | 高     |
| RPT-003 | 日付フィルタ       | 日報が複数存在             | 1. date_from, date_toを指定  | 指定期間の日報のみ取得     | 中     |
| RPT-004 | ステータスフィルタ | 下書き・提出済み日報が存在 | 1. status=submittedを指定    | 提出済み日報のみ取得       | 中     |
| RPT-005 | ページネーション   | 日報が30件以上存在         | 1. page=2, per_page=10を指定 | 11〜20件目が取得できる     | 中     |

### 5.2 日報作成

| No      | テストケース         | 前提条件         | 操作手順                         | 期待結果                                    | 優先度 |
| ------- | -------------------- | ---------------- | -------------------------------- | ------------------------------------------- | ------ |
| RPT-010 | 正常作成（最小項目） | ログイン済み     | 1. report_dateのみ指定して作成   | 日報が作成される（status=draft）            | 高     |
| RPT-011 | 正常作成（全項目）   | ログイン済み     | 1. 訪問・Problem・Plan含めて作成 | 日報と関連データが作成される                | 高     |
| RPT-012 | 同一日付の重複作成   | 同日の日報が存在 | 1. 同じ日付で日報作成            | 422エラー「この日付の日報は既に存在します」 | 高     |
| RPT-013 | 未来日付での作成     | -                | 1. 明日以降の日付で作成          | 作成可能（または要件により禁止）            | 中     |
| RPT-014 | 日付未指定           | -                | 1. report_dateなしで作成         | 422エラー「報告日は必須です」               | 中     |

### 5.3 日報詳細取得

| No      | テストケース           | 前提条件             | 操作手順                          | 期待結果                              | 優先度 |
| ------- | ---------------------- | -------------------- | --------------------------------- | ------------------------------------- | ------ |
| RPT-020 | 自分の日報取得         | 自分の日報が存在     | 1. 日報詳細APIを実行              | 日報詳細が取得できる                  | 高     |
| RPT-021 | 部下の日報取得（上長） | 部下の日報が存在     | 1. 上長として部下の日報詳細を取得 | 日報詳細が取得できる                  | 高     |
| RPT-022 | 他人の日報取得（営業） | 他の営業の日報が存在 | 1. 他人の日報詳細を取得           | 403エラー「アクセス権限がありません」 | 高     |
| RPT-023 | 存在しない日報         | -                    | 1. 存在しないIDで取得             | 404エラー「日報が見つかりません」     | 中     |

### 5.4 日報更新

| No      | テストケース       | 前提条件           | 操作手順            | 期待結果                                    | 優先度 |
| ------- | ------------------ | ------------------ | ------------------- | ------------------------------------------- | ------ |
| RPT-030 | 下書き日報の更新   | 下書き日報が存在   | 1. 日報内容を更新   | 更新成功                                    | 高     |
| RPT-031 | 提出済み日報の更新 | 提出済み日報が存在 | 1. 日報内容を更新   | 403エラー「提出済みの日報は編集できません」 | 高     |
| RPT-032 | 他人の日報更新     | 他人の日報が存在   | 1. 他人の日報を更新 | 403エラー                                   | 高     |

### 5.5 日報削除

| No      | テストケース       | 前提条件           | 操作手順             | 期待結果                                    | 優先度 |
| ------- | ------------------ | ------------------ | -------------------- | ------------------------------------------- | ------ |
| RPT-040 | 下書き日報の削除   | 下書き日報が存在   | 1. 日報削除APIを実行 | 削除成功（関連データも削除）                | 高     |
| RPT-041 | 提出済み日報の削除 | 提出済み日報が存在 | 1. 日報削除APIを実行 | 403エラー「提出済みの日報は削除できません」 | 高     |
| RPT-042 | 他人の日報削除     | 他人の日報が存在   | 1. 他人の日報を削除  | 403エラー                                   | 高     |

### 5.6 日報提出

| No      | テストケース       | 前提条件           | 操作手順             | 期待結果                         | 優先度 |
| ------- | ------------------ | ------------------ | -------------------- | -------------------------------- | ------ |
| RPT-050 | 正常提出           | 下書き日報が存在   | 1. 日報提出APIを実行 | status=submittedに変更           | 高     |
| RPT-051 | 既に提出済み       | 提出済み日報が存在 | 1. 日報提出APIを実行 | 422エラー「既に提出済みです」    | 中     |
| RPT-052 | 訪問記録なしで提出 | 訪問記録がない日報 | 1. 日報提出APIを実行 | 提出可能（または要件により警告） | 中     |

---

## 6. 訪問記録機能テスト

### 6.1 訪問記録登録

| No      | テストケース         | 前提条件           | 操作手順                          | 期待結果                                      | 優先度 |
| ------- | -------------------- | ------------------ | --------------------------------- | --------------------------------------------- | ------ |
| VST-001 | 正常登録（全項目）   | 日報が存在         | 1. 全項目を入力して登録           | 訪問記録が作成される                          | 高     |
| VST-002 | 正常登録（必須のみ） | 日報が存在         | 1. customer_id, visit_contentのみ | 訪問記録が作成される                          | 高     |
| VST-003 | 顧客ID未指定         | 日報が存在         | 1. customer_idなしで登録          | 422エラー「顧客は必須です」                   | 高     |
| VST-004 | 訪問内容未指定       | 日報が存在         | 1. visit_contentなしで登録        | 422エラー「訪問内容は必須です」               | 高     |
| VST-005 | 存在しない顧客ID     | 日報が存在         | 1. 存在しないcustomer_idで登録    | 422エラー「顧客が見つかりません」             | 中     |
| VST-006 | 提出済み日報への追加 | 提出済み日報が存在 | 1. 訪問記録を追加                 | 403エラー「提出済みの日報には追加できません」 | 高     |
| VST-007 | 複数訪問記録の登録   | 日報が存在         | 1. 同一日報に5件の訪問を登録      | 全て正常に登録される                          | 中     |

### 6.2 訪問記録更新・削除

| No      | テストケース           | 前提条件           | 操作手順          | 期待結果  | 優先度 |
| ------- | ---------------------- | ------------------ | ----------------- | --------- | ------ |
| VST-010 | 正常更新               | 訪問記録が存在     | 1. 訪問内容を更新 | 更新成功  | 高     |
| VST-011 | 正常削除               | 訪問記録が存在     | 1. 訪問記録を削除 | 削除成功  | 高     |
| VST-012 | 提出済み日報の訪問更新 | 提出済み日報の訪問 | 1. 訪問内容を更新 | 403エラー | 高     |
| VST-013 | 他人の訪問記録更新     | 他人の訪問記録     | 1. 訪問内容を更新 | 403エラー | 高     |

---

## 7. Problem機能テスト

### 7.1 Problem登録

| No      | テストケース    | 前提条件   | 操作手順                           | 期待結果                                               | 優先度 |
| ------- | --------------- | ---------- | ---------------------------------- | ------------------------------------------------------ | ------ |
| PRB-001 | 正常登録        | 日報が存在 | 1. content, priorityを入力して登録 | Problem作成成功                                        | 高     |
| PRB-002 | 内容未指定      | 日報が存在 | 1. contentなしで登録               | 422エラー「内容は必須です」                            | 高     |
| PRB-003 | 優先度未指定    | 日報が存在 | 1. priorityなしで登録              | 422エラー「優先度は必須です」                          | 中     |
| PRB-004 | 不正な優先度    | 日報が存在 | 1. priority=invalidで登録          | 422エラー「優先度はhigh/medium/lowで指定してください」 | 中     |
| PRB-005 | 複数Problem登録 | 日報が存在 | 1. 同一日報に3件登録               | 全て正常に登録される                                   | 中     |

### 7.2 Problem更新・削除

| No      | テストケース              | 前提条件              | 操作手順         | 期待結果                   | 優先度 |
| ------- | ------------------------- | --------------------- | ---------------- | -------------------------- | ------ |
| PRB-010 | 正常更新                  | Problemが存在         | 1. 内容を更新    | 更新成功                   | 高     |
| PRB-011 | 正常削除                  | Problemが存在         | 1. Problemを削除 | 削除成功（コメントも削除） | 高     |
| PRB-012 | 提出済み日報のProblem更新 | 提出済み日報のProblem | 1. 内容を更新    | 403エラー                  | 高     |

---

## 8. Plan機能テスト

### 8.1 Plan登録

| No      | テストケース | 前提条件   | 操作手順                 | 期待結果                    | 優先度 |
| ------- | ------------ | ---------- | ------------------------ | --------------------------- | ------ |
| PLN-001 | 正常登録     | 日報が存在 | 1. contentを入力して登録 | Plan作成成功                | 高     |
| PLN-002 | 内容未指定   | 日報が存在 | 1. contentなしで登録     | 422エラー「内容は必須です」 | 高     |
| PLN-003 | 複数Plan登録 | 日報が存在 | 1. 同一日報に3件登録     | 全て正常に登録される        | 中     |

### 8.2 Plan更新・削除

| No      | テストケース           | 前提条件           | 操作手順      | 期待結果                   | 優先度 |
| ------- | ---------------------- | ------------------ | ------------- | -------------------------- | ------ |
| PLN-010 | 正常更新               | Planが存在         | 1. 内容を更新 | 更新成功                   | 高     |
| PLN-011 | 正常削除               | Planが存在         | 1. Planを削除 | 削除成功（コメントも削除） | 高     |
| PLN-012 | 提出済み日報のPlan更新 | 提出済み日報のPlan | 1. 内容を更新 | 403エラー                  | 高     |

---

## 9. コメント機能テスト

### 9.1 コメント投稿

| No      | テストケース                | 前提条件                      | 操作手順                    | 期待結果                                        | 優先度 |
| ------- | --------------------------- | ----------------------------- | --------------------------- | ----------------------------------------------- | ------ |
| CMT-001 | Problemへのコメント（上長） | 上長でログイン、Problemが存在 | 1. コメントを投稿           | コメント作成成功                                | 高     |
| CMT-002 | Planへのコメント（上長）    | 上長でログイン、Planが存在    | 1. コメントを投稿           | コメント作成成功                                | 高     |
| CMT-003 | コメント内容未指定          | 上長でログイン                | 1. contentなしで投稿        | 422エラー「内容は必須です」                     | 中     |
| CMT-004 | 営業によるコメント          | 営業でログイン                | 1. コメントを投稿           | 403エラー（または要件により許可）               | 中     |
| CMT-005 | 複数コメント投稿            | 上長でログイン                | 1. 同一Problemに3件コメント | 全て正常に投稿される                            | 中     |
| CMT-006 | 担当外へのコメント          | 担当外の営業の日報            | 1. コメントを投稿           | 403エラー「担当外の日報にはコメントできません」 | 高     |

### 9.2 コメント取得

| No      | テストケース        | 前提条件       | 操作手順              | 期待結果                 | 優先度 |
| ------- | ------------------- | -------------- | --------------------- | ------------------------ | ------ |
| CMT-010 | Problemコメント取得 | コメントが存在 | 1. コメント一覧を取得 | コメント一覧が取得できる | 高     |
| CMT-011 | Planコメント取得    | コメントが存在 | 1. コメント一覧を取得 | コメント一覧が取得できる | 高     |
| CMT-012 | コメントなしの取得  | コメントが0件  | 1. コメント一覧を取得 | 空配列が返却される       | 低     |

### 9.3 コメント削除

| No      | テストケース       | 前提条件             | 操作手順          | 期待結果  | 優先度 |
| ------- | ------------------ | -------------------- | ----------------- | --------- | ------ |
| CMT-020 | 自分のコメント削除 | 自分のコメントが存在 | 1. コメントを削除 | 削除成功  | 高     |
| CMT-021 | 他人のコメント削除 | 他人のコメントが存在 | 1. コメントを削除 | 403エラー | 高     |

---

## 10. 顧客マスタ機能テスト

### 10.1 顧客登録

| No      | テストケース         | 前提条件         | 操作手順                   | 期待結果                      | 優先度 |
| ------- | -------------------- | ---------------- | -------------------------- | ----------------------------- | ------ |
| CUS-001 | 正常登録（全項目）   | 管理者でログイン | 1. 全項目を入力して登録    | 顧客が作成される              | 高     |
| CUS-002 | 正常登録（必須のみ） | 管理者でログイン | 1. customer_nameのみで登録 | 顧客が作成される              | 高     |
| CUS-003 | 顧客名未指定         | 管理者でログイン | 1. customer_nameなしで登録 | 422エラー「顧客名は必須です」 | 高     |
| CUS-004 | 営業による登録       | 営業でログイン   | 1. 顧客を登録              | 403エラー「権限がありません」 | 中     |

### 10.2 顧客一覧・詳細取得

| No      | テストケース   | 前提条件   | 操作手順                 | 期待結果                  | 優先度 |
| ------- | -------------- | ---------- | ------------------------ | ------------------------- | ------ |
| CUS-010 | 一覧取得       | 顧客が存在 | 1. 顧客一覧APIを実行     | 顧客一覧が取得できる      | 高     |
| CUS-011 | キーワード検索 | 顧客が存在 | 1. keyword=ABCで検索     | 「ABC」を含む顧客のみ取得 | 中     |
| CUS-012 | 業種フィルタ   | 顧客が存在 | 1. industry=製造業で検索 | 製造業の顧客のみ取得      | 中     |
| CUS-013 | 詳細取得       | 顧客が存在 | 1. 顧客詳細APIを実行     | 顧客詳細が取得できる      | 高     |
| CUS-014 | 存在しない顧客 | -          | 1. 存在しないIDで取得    | 404エラー                 | 中     |

### 10.3 顧客更新・削除

| No      | テストケース           | 前提条件                     | 操作手順          | 期待結果                   | 優先度 |
| ------- | ---------------------- | ---------------------------- | ----------------- | -------------------------- | ------ |
| CUS-020 | 正常更新               | 管理者でログイン、顧客が存在 | 1. 顧客情報を更新 | 更新成功                   | 高     |
| CUS-021 | 正常削除（論理削除）   | 管理者でログイン、顧客が存在 | 1. 顧客を削除     | is_active=falseになる      | 高     |
| CUS-022 | 訪問実績ありの顧客削除 | 訪問記録がある顧客           | 1. 顧客を削除     | 論理削除成功（データ保持） | 中     |

---

## 11. 営業マスタ機能テスト

### 11.1 営業登録

| No      | テストケース       | 前提条件               | 操作手順                 | 期待結果                                              | 優先度 |
| ------- | ------------------ | ---------------------- | ------------------------ | ----------------------------------------------------- | ------ |
| SLS-001 | 正常登録           | 管理者でログイン       | 1. 全項目を入力して登録  | 営業が作成される                                      | 高     |
| SLS-002 | メールアドレス重複 | 同一メールの営業が存在 | 1. 同じメールで登録      | 422エラー「このメールアドレスは既に使用されています」 | 高     |
| SLS-003 | パスワード短すぎ   | 管理者でログイン       | 1. 7文字以下のパスワード | 422エラー「パスワードは8文字以上です」                | 中     |
| SLS-004 | 存在しない上長ID   | 管理者でログイン       | 1. 存在しないmanager_id  | 422エラー「上長が見つかりません」                     | 中     |

### 11.2 営業一覧・詳細取得

| No      | テストケース | 前提条件   | 操作手順              | 期待結果                             | 優先度 |
| ------- | ------------ | ---------- | --------------------- | ------------------------------------ | ------ |
| SLS-010 | 一覧取得     | 営業が存在 | 1. 営業一覧APIを実行  | 営業一覧が取得できる                 | 高     |
| SLS-011 | 役割フィルタ | 営業が存在 | 1. role=managerで検索 | 上長のみ取得                         | 中     |
| SLS-012 | 詳細取得     | 営業が存在 | 1. 営業詳細APIを実行  | 営業詳細が取得できる（部下一覧含む） | 高     |

### 11.3 営業更新・削除

| No      | テストケース         | 前提条件                     | 操作手順          | 期待結果                                                              | 優先度 |
| ------- | -------------------- | ---------------------------- | ----------------- | --------------------------------------------------------------------- | ------ |
| SLS-020 | 正常更新             | 管理者でログイン、営業が存在 | 1. 営業情報を更新 | 更新成功                                                              | 高     |
| SLS-021 | 正常削除（論理削除） | 管理者でログイン、営業が存在 | 1. 営業を削除     | is_active=falseになる                                                 | 高     |
| SLS-022 | 自分自身の削除       | 管理者でログイン             | 1. 自分を削除     | 403エラー「自分自身は削除できません」                                 | 中     |
| SLS-023 | 部下がいる上長の削除 | 部下がいる上長               | 1. 上長を削除     | 422エラー「部下が存在するため削除できません」または部下の上長をNULLに | 中     |

---

## 12. 権限テスト

### 12.1 ロール別アクセス制御

| No      | テストケース           | ロール  | 対象機能       | 期待結果           | 優先度 |
| ------- | ---------------------- | ------- | -------------- | ------------------ | ------ |
| ACL-001 | 営業：日報作成         | sales   | 日報作成       | 許可               | 高     |
| ACL-002 | 営業：自分の日報閲覧   | sales   | 日報詳細       | 許可               | 高     |
| ACL-003 | 営業：他人の日報閲覧   | sales   | 日報詳細       | 拒否               | 高     |
| ACL-004 | 営業：コメント投稿     | sales   | コメント投稿   | 拒否（要件による） | 中     |
| ACL-005 | 営業：顧客登録         | sales   | 顧客登録       | 拒否               | 高     |
| ACL-006 | 上長：部下の日報閲覧   | manager | 日報詳細       | 許可               | 高     |
| ACL-007 | 上長：コメント投稿     | manager | コメント投稿   | 許可               | 高     |
| ACL-008 | 上長：他部署の日報閲覧 | manager | 日報詳細       | 拒否               | 高     |
| ACL-009 | 管理者：全日報閲覧     | admin   | 日報詳細       | 許可               | 高     |
| ACL-010 | 管理者：マスタ管理     | admin   | 顧客・営業登録 | 許可               | 高     |

---

## 13. 画面テスト

### 13.1 ログイン画面（SCR-001）

| No     | テストケース             | 操作手順                  | 期待結果                                       | 優先度 |
| ------ | ------------------------ | ------------------------- | ---------------------------------------------- | ------ |
| UI-001 | 初期表示                 | 1. ログイン画面にアクセス | メール・パスワード入力欄とログインボタンが表示 | 高     |
| UI-002 | バリデーションエラー表示 | 1. 空のまま送信           | エラーメッセージが表示される                   | 高     |
| UI-003 | パスワードマスク         | 1. パスワードを入力       | 入力内容がマスクされる                         | 中     |

### 13.2 ダッシュボード（SCR-002）

| No     | テストケース   | 操作手順                    | 期待結果             | 優先度 |
| ------ | -------------- | --------------------------- | -------------------- | ------ |
| UI-010 | 日報一覧表示   | 1. ダッシュボードにアクセス | 日報一覧が表示される | 高     |
| UI-011 | 新規作成ボタン | 1. 新規作成ボタンをクリック | 日報作成画面に遷移   | 高     |
| UI-012 | 日報クリック   | 1. 日報行をクリック         | 日報詳細画面に遷移   | 高     |

### 13.3 日報作成画面（SCR-003）

| No     | テストケース | 操作手順                          | 期待結果                         | 優先度 |
| ------ | ------------ | --------------------------------- | -------------------------------- | ------ |
| UI-020 | 訪問追加     | 1. 「訪問を追加」ボタンをクリック | 訪問入力フォームが追加される     | 高     |
| UI-021 | 訪問削除     | 1. 訪問の削除ボタンをクリック     | 訪問入力フォームが削除される     | 高     |
| UI-022 | 顧客選択     | 1. 顧客プルダウンをクリック       | 顧客一覧が表示され選択可能       | 高     |
| UI-023 | 下書き保存   | 1. 下書き保存ボタンをクリック     | 下書きとして保存される           | 高     |
| UI-024 | 提出         | 1. 提出ボタンをクリック           | 確認ダイアログ表示後、提出される | 高     |

### 13.4 日報詳細画面（SCR-004）

| No     | テストケース                 | 操作手順                                           | 期待結果                        | 優先度 |
| ------ | ---------------------------- | -------------------------------------------------- | ------------------------------- | ------ |
| UI-030 | 詳細表示                     | 1. 日報詳細画面にアクセス                          | 訪問・Problem・Planが全て表示   | 高     |
| UI-031 | コメント表示                 | 1. 日報詳細画面にアクセス                          | 各Problem・Planのコメントが表示 | 高     |
| UI-032 | コメント投稿（上長）         | 1. コメント入力欄に入力<br>2. 送信ボタンをクリック | コメントが追加表示される        | 高     |
| UI-033 | 編集ボタン表示（下書き）     | 1. 下書き日報を表示                                | 編集ボタンが表示される          | 中     |
| UI-034 | 編集ボタン非表示（提出済み） | 1. 提出済み日報を表示                              | 編集ボタンが表示されない        | 中     |

---

## 14. 非機能テスト

### 14.1 性能テスト

| No      | テストケース | 条件                   | 期待結果            | 優先度 |
| ------- | ------------ | ---------------------- | ------------------- | ------ |
| PRF-001 | 日報一覧取得 | 1000件のデータ         | 3秒以内にレスポンス | 高     |
| PRF-002 | 日報詳細取得 | 訪問10件、コメント20件 | 2秒以内にレスポンス | 高     |
| PRF-003 | 同時接続     | 50ユーザー同時アクセス | システム正常稼働    | 高     |

### 14.2 セキュリティテスト

| No      | テストケース        | 操作手順                                           | 期待結果                       | 優先度 |
| ------- | ------------------- | -------------------------------------------------- | ------------------------------ | ------ |
| SEC-001 | SQLインジェクション | 1. 入力欄に `'; DROP TABLE users; --` を入力       | 攻撃が防がれる                 | 高     |
| SEC-002 | XSS                 | 1. 入力欄に `<script>alert('XSS')</script>` を入力 | スクリプトが実行されない       | 高     |
| SEC-003 | CSRF                | 1. 外部サイトからPOSTリクエスト                    | リクエストが拒否される         | 高     |
| SEC-004 | 認証なしアクセス    | 1. トークンなしでAPIアクセス                       | 401エラー                      | 高     |
| SEC-005 | パスワードハッシュ  | 1. DBのパスワードカラムを確認                      | 平文でなくハッシュ化されている | 高     |

### 14.3 ユーザビリティテスト

| No      | テストケース               | 条件                     | 期待結果                       | 優先度 |
| ------- | -------------------------- | ------------------------ | ------------------------------ | ------ |
| USB-001 | レスポンシブ（タブレット） | iPadでアクセス           | 適切にレイアウトされる         | 中     |
| USB-002 | エラーメッセージ           | バリデーションエラー発生 | 分かりやすいメッセージが表示   | 中     |
| USB-003 | ローディング表示           | API通信中                | ローディングインジケータが表示 | 低     |

---

## 15. 回帰テスト

リリース前に以下の主要機能を必ず確認する。

| No  | 機能     | 確認項目                          |
| --- | -------- | --------------------------------- |
| 1   | ログイン | 正常ログイン可能                  |
| 2   | 日報作成 | 訪問・Problem・Plan含めて作成可能 |
| 3   | 日報提出 | ステータスが変更される            |
| 4   | コメント | 上長がコメント投稿可能            |
| 5   | 顧客一覧 | 訪問時に顧客選択可能              |

---

## 16. テスト結果報告

### 16.1 報告フォーマット

| 項目             | 内容       |
| ---------------- | ---------- |
| テスト実施日     | YYYY-MM-DD |
| 実施者           | 氏名       |
| 総テストケース数 | XX件       |
| 実施件数         | XX件       |
| 成功件数         | XX件       |
| 失敗件数         | XX件       |
| 未実施件数       | XX件       |
| 合格率           | XX%        |

### 16.2 バグ報告フォーマット

| 項目           | 内容                                |
| -------------- | ----------------------------------- |
| バグID         | BUG-XXX                             |
| 発見日         | YYYY-MM-DD                          |
| テストケースNo | XXX-XXX                             |
| 重要度         | Critical / Major / Minor            |
| 概要           | バグの概要                          |
| 再現手順       | 1. xxx<br>2. xxx                    |
| 期待結果       | xxx                                 |
| 実際の結果     | xxx                                 |
| 担当者         | 氏名                                |
| ステータス     | Open / In Progress / Fixed / Closed |

---

## 改訂履歴

| バージョン | 日付       | 変更内容 | 担当者 |
| ---------- | ---------- | -------- | ------ |
| 1.0        | 2026-02-15 | 初版作成 | -      |
